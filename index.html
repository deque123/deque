<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoiPLE的博客</title>
    <!-- Favicon -->
    <link rel="icon" href="https://raw.githubusercontent.com/deque123/deque/refs/heads/main/11D904FE1941921E69622A96C1D40C48.png" type="image/png">
    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <!-- Markdown CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.2.0/github-markdown.min.css">
    <!-- 图标库 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #f5f5f5;
            --text-color: #000000;
            --article-bg: rgba(255, 255, 255, 0.92);
            --header-bg: rgba(255, 255, 255, 0.95);
            --border-color: rgba(0, 0, 0, 0.1);
            --hover-bg: rgba(0, 0, 0, 0.03);
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --sidebar-bg: rgba(255, 255, 255, 0.9);
            --date-color: #666;
        }

        .dark-mode {
            --bg-color: #1a1a1a;
            --text-color: #ffffff;
            --article-bg: rgba(40, 40, 40, 0.92);
            --header-bg: rgba(40, 40, 40, 0.95);
            --border-color: rgba(255, 255, 255, 0.1);
            --hover-bg: rgba(255, 255, 255, 0.05);
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            --sidebar-bg: rgba(40, 40, 40, 0.9);
            --date-color: #aaa;
        }

        /* 进度条样式 */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: transparent;
            z-index: 1001;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #ff6b6b 0%, #ffa8a8 100%);
            width: 0%;
            transition: width 0.2s ease;
        }

        .dark-mode .progress-bar {
            background: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, 
                         "楷体", "KaiTi", "STKaiti", sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }
        .main-container {
            display: flex;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            gap: 30px;
        }
        
        .content-area {
            flex: 1;
            max-width: 800px;
        }
        
        .sidebar {
            width: 300px;
            position: relative;
        }
        .header-image {
            width: 100%;
            height: 1050px;
            background-image: url('https://raw.githubusercontent.com/deque123/deque/refs/heads/main/497bf94139377ad39592b16b8854c398423517587.png');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
            font-family: "楷体", "KaiTi", "STKaiti", sans-serif;
        }
        
        .header-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.7));
        }
        
        .header-image h1 {
            position: relative;
            z-index: 2;
        }
        
        /* 日夜切换按钮 */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--header-bg);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        .theme-toggle i {
            font-size: 1.2em;
            color: var(--text-color);
        }
        
        /* 个人信息框 */
        .profile-card {
            background: var(--sidebar-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            position: sticky;
            top: 100px;
            text-align: center;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 15px;
            background-image: url('https://raw.githubusercontent.com/deque123/deque/refs/heads/main/11D904FE1941921E69622A96C1D40C48.png');
            background-size: cover;
            background-position: center;
            border: 3px solid var(--border-color);
        }
        
        .profile-name {
            font-size: 1.5em;
            font-weight: bold;
            margin: 0 0 10px;
            color: var(--text-color);
            font-family: "楷体", "KaiTi", "STKaiti", sans-serif;
        }
        
        .profile-bio {
            color: var(--text-color);
            line-height: 1.6;
            margin: 0 0 20px;
            opacity: 0.8;
            font-size: 0.95em;
            font-family: "楷体", "KaiTi", "STKaiti", sans-serif;
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-link {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--hover-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .social-link:hover {
            transform: translateY(-2px);
            background: var(--text-color);
            color: var(--bg-color);
        }
        
        /* 文章样式 */
        .article-container {
            background-color: var(--article-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(8px);
            margin-bottom: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .article-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }
        
        .article-header:hover {
            background-color: var(--hover-bg);
        }
        
        .article-title-container {
            flex: 1;
        }
        
        .article-title {
            margin: 0;
            font-size: 1.5em;
            color: var(--text-color);
            font-family: "楷体", "KaiTi", "STKaiti", sans-serif;
        }
        
        .article-date {
            font-size: 0.85em;
            color: var(--date-color);
            margin-top: 5px;
            font-family: "楷体", "KaiTi", "STKaiti", sans-serif;
        }
        
        .toggle-button {
            font-size: 1.2em;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
        }
        
        .article-content {
            padding: 0 20px;
            display: none;
        }
        
        .article-content.markdown-body {
            padding: 20px;
        }
        
        .article-content.expanded {
            display: block;
        }
        
        /* Markdown内容样式 */
        .markdown-body {
            color: var(--text-color);
            background-color: transparent;
            font-family: "楷体", "KaiTi", "STKaiti", sans-serif;
        }
        
        .markdown-body pre, 
        .markdown-body code {
            background-color: rgb(255, 255, 255, 0.2);
            font-family: monospace; /* 代码保持等宽字体 */
        }
        
        .dark-mode .markdown-body pre,
        .dark-mode .markdown-body code {
            background-color: rgb(0, 0, 0, 0.2);
        }
        
        /* 视频容器样式 */
        .video-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 宽高比 */
            margin: 20px 0;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* KaTeX 公式样式调整 */
        .katex { 
            font-size: 1.1em !important; 
        }
        
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            padding: 10px 0;
        }
        
        /* 返回顶部按钮 */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--header-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
        }
        
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            transform: translateY(-5px);
            background: var(--hover-bg);
        }
        
        /* 响应式设计 */
        @media (max-width: 968px) {
            .main-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                order: -1;
            }
            
            .profile-card {
                position: relative;
                top: 0;
                margin-bottom: 30px;
            }
            
            .header-image {
                height: 250px; /* 在小屏幕上稍微降低高度 */
            }
            
            .back-to-top {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
            }
        }
        
        @media (max-width: 600px) {
            .header-image {
                height: 200px; /* 在更小的屏幕上进一步降低高度 */
                font-size: 2em;
            }
            
            .back-to-top {
                bottom: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>
<body>
    <!-- 顶部进度条 -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <canvas id="canvas"></canvas>
    
    <!-- 顶部图片 -->
    <div class="header-image">
        <h1>NoiPLE</h1>
    </div>
    
    <!-- 日夜切换按钮 -->
    <div class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon"></i>
    </div>
    
    <!-- 返回顶部按钮 -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <div class="main-container">
        <div class="content-area" id="blog-container">
            <!-- 文章将通过JavaScript动态加载 -->
        </div>
        
        <!-- 右侧个人信息框 -->
        <div class="sidebar">
            <div class="profile-card">
                <div class="profile-avatar"></div>
                <h2 class="profile-name">NoiPLE(也叫|deque)</h2>
                <p class="profile-bio">何人扶我凌云志?</p>
                
                <div class="social-links">
                    <a href="https://github.com/deque123" class="social-link">
                        <i class="fab fa-github"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Marked (Markdown解析器) -->
    <script src="https://cdn.jsdelivr.net/npm/marked@4.2.12/marked.min.js"></script>
    <!-- KaTeX JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    <!-- DOMPurify (安全渲染HTML) -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>
    
    <script>
        // 示例文章数据
        const articles = [
            {
                title: "这是我的博客",
                date: "2025-08-17",
                content: `
### 很高兴你来看... 

### 嘻嘻...

### 耶？你咋还看这...

### 没事，awa

\`== std 14 ==\`

\`== std 23 ==\`

                `
            },
            {
                title: "题解-Luogu-P1001",
                date: "2025-08-18",
                content:`
### 只是一个普通的A+B问题...
\`\`\`
#include<bits/stdc/stdc.h>
using namespace std;
using ll = long long;
int main(){
    ll a, b;//定义变量
    cin>>a>>b;
    cout<<a+b<<'\\n';//'\\n'是换行，用endl也是一样的
}
\`\`\`
                `
            },
            {
                title: "题解-Luogu-P3147",
                date: "2025-08-20",
                content:`
### 倍增模板
我们可以从两个合并中看出是倍增，
因此，定义 $ f(i, j) $ 表示当前第 $ i $个位置的合成出第 $ j $个数的位置，
所以，转移公式为:
$ f(i, j)=f(f(i, j-1), j-1) $
\`\`\`
#include<bits/stdc++.h>
using namespace std;
const int N = 5e5 + 10;
int n, ans;
int f[N][105];
int main(){
	cin>>n;
	for(int i=1;i<=n;i++){
		int x;cin>>x;
    	f[i][x]=i;
    }
	for(int i=1;i<=92;i++){
    	for(int j=1;j<=n;j++){
    		f[j][i]=f[f[j][i-1]+1][i-1];
    		if(f[j][i]>0){
			    ans=i;
			    continue;
		    }
	    }
    }
    cout<<ans<<'\\n';
}
\`\`\`
                `
            }
        ];

        // 日夜切换功能
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle i');
            
            body.classList.toggle('dark-mode');
            
            if (body.classList.contains('dark-mode')) {
                themeToggle.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
            } else {
                themeToggle.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
            }
            
            renderMath();
        }

        // 初始化主题
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const themeToggle = document.querySelector('.theme-toggle i');
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.className = 'fas fa-sun';
            } else {
                themeToggle.className = 'fas fa-moon';
            }
        }

        // 配置marked
        marked.setOptions({
            breaks: true,
            gfm: true,
            highlight: function(code, lang) {
                return code;
            }
        });

        // 自定义渲染器处理视频链接
        const renderer = new marked.Renderer();
        const originalLink = renderer.link;
        
        // 重写链接渲染方法以检测视频链接
        renderer.link = function(href, title, text) {
            // 检测B站视频链接
            if (href.includes('player.bilibili.com')) {
                return `<div class="video-container"><iframe src="${href}" scrolling="no" frameborder="no" framespacing="0" allowfullscreen="true"></iframe></div>`;
            }
            
            // 检测YouTube视频链接
            if (href.includes('youtube.com/embed/') || href.includes('youtu.be/')) {
                let videoId = '';
                if (href.includes('youtube.com/embed/')) {
                    videoId = href.split('youtube.com/embed/')[1];
                } else if (href.includes('youtu.be/')) {
                    videoId = href.split('youtu.be/')[1];
                }
                
                if (videoId) {
                    // 清除可能的额外参数
                    videoId = videoId.split('?')[0];
                    return `<div class="video-container"><iframe src="https://www.youtube.com/embed/${videoId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`;
                }
            }
            
            // 默认链接处理
            return originalLink.call(this, href, title, text);
        };

        // 渲染文章
        function renderArticles() {
            const container = document.getElementById('blog-container');
            container.innerHTML = '';
            
            articles.forEach((article, index) => {
                const articleId = `article-${index}`;
                const contentHtml = DOMPurify.sanitize(marked.parse(article.content, { renderer }));
                
                const articleElement = document.createElement('div');
                articleElement.className = 'article-container';
                articleElement.innerHTML = `
                    <div class="article-header" onclick="toggleArticle('${articleId}')">
                        <div class="article-title-container">
                            <h2 class="article-title">${article.title}</h2>
                            <div class="article-date">${article.date}</div>
                        </div>
                        <button class="toggle-button">+</button>
                    </div>
                    <div class="article-content" id="${articleId}">
                        <div class="markdown-body">
                            ${contentHtml}
                        </div>
                    </div>
                `;
                
                container.appendChild(articleElement);
            });
            
            renderMath();
        }

        // 渲染数学公式
        function renderMath() {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '\\(', right: '\\)', display: false},
                        {left: '\\[', right: '\\]', display: true},
                        {left: '$', right: '$', display: false}
                    ],
                    throwOnError: false,
                    output: 'html'
                });
            }
        }

        // 切换文章展开/折叠
        window.toggleArticle = function(articleId) {
            const content = document.getElementById(articleId);
            const button = content.previousElementSibling.querySelector('.toggle-button');
            
            content.classList.toggle('expanded');
            button.textContent = content.classList.contains('expanded') ? '-' : '+';
            
            // 重新渲染数学公式，确保展开后公式正确显示
            setTimeout(renderMath, 10);
        };

        // 返回顶部功能
        function initBackToTop() {
            const backToTopBtn = document.getElementById('backToTop');
            const scrollThreshold = 300; // 滚动超过300px显示按钮
            
            // 监听滚动事件
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > scrollThreshold) {
                    backToTopBtn.classList.add('show');
                } else {
                    backToTopBtn.classList.remove('show');
                }
            });
            
            // 点击返回顶部
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // 进度条功能
        function initProgressBar() {
            const progressBar = document.getElementById('progressBar');
            
            window.addEventListener('scroll', () => {
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight - windowHeight;
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                const scrollPercentage = (scrollTop / documentHeight) * 100;
                progressBar.style.width = scrollPercentage + '%';
            });
        }

        // 线条跟随效果
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        let mouseX = canvas.width / 2;
        let mouseY = canvas.height / 2;
        
        const line = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            color: `hsl(${Math.random() * 360}, 70%, 50%)`,
            size: 2,
            history: [],
            maxHistory: 40
        };
        
        window.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });
        
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        function animate() {
            ctx.fillStyle = document.body.classList.contains('dark-mode') 
                ? 'rgba(26, 26, 26, 0.1)' 
                : 'rgba(245, 245, 245, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            const dx = mouseX - line.x;
            const dy = mouseY - line.y;
            
            line.x += dx * 0.1;
            line.y += dy * 0.1;
            
            line.history.push({x: line.x, y: line.y});
            if (line.history.length > line.maxHistory) {
                line.history.shift();
            }
            
            ctx.beginPath();
            ctx.moveTo(line.history[0].x, line.history[0].y);
            for (let i = 1; i < line.history.length; i++) {
                const point = line.history[i];
                const prevPoint = line.history[i-1];
                const xc = (prevPoint.x + point.x) / 2;
                const yc = (prevPoint.y + point.y) / 2;
                ctx.quadraticCurveTo(prevPoint.x, prevPoint.y, xc, yc);
            }
            ctx.strokeStyle = line.color;
            ctx.lineWidth = line.size;
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(line.x, line.y, line.size * 1.5, 0, Math.PI * 2);
            ctx.fillStyle = line.color;
            ctx.fill();
            
            requestAnimationFrame(animate);
        }

        // 初始化
        initTheme();
        initBackToTop();
        initProgressBar();
        animate();
        renderArticles();
    </script>
</body>
</html>





